<!DOCTYPE html>
<html>
  <head>
    <title>Chatbot</title>
    <style>
      .body {
        font-family: arial;
        margin-top:0px;
        margin-bottom:0px;
      }

      .send-button {
        background-color: rgb(57, 134, 89);
        color: white;
        padding: 12px 20px;
        margin-left: 10px;
        border: none;
        border-radius: 10px;
        font-size:15px;
        cursor: pointer;
      }

      .class-input{
        padding: 12px 15px;
        border-radius: 10px;
        border-width: 1px;
        font-size: 15px;

        flex-grow: 1;
        
      }

      .chat-input-container{
        display: flex;
        margin-bottom: 60px;
      }

      .app-container{
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
        
        height: 100vh;
        display:flex;
        flex-direction: column;
      }

      .chat-message-user{
        display: flex;
        justify-content: right;
        align-items: start;
      }

      .chat-message-robot{
        display: flex;
        align-items: start;
      }


      .chat-message-text{
        background-color: rgb(232, 231, 230);
        padding: 15px 20px;
        border-radius: 10px;
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 20px;
        max-width: 300px;
      }

      .chat-message-profile{
        width: 45px;
      }

      .chat-messages-container{
        flex-grow: 1;
        margin-bottom: 20px;
      }

    </style>
  </head>
  <body>
    <div class="js-container"></div>

    <script src="https://unpkg.com/supersimpledev/react.js"></script>
    <script src="https://unpkg.com/supersimpledev/react-dom.js"></script>

    <script src="https://unpkg.com/supersimpledev/chatbot.js"></script>

    <script src="https://unpkg.com/supersimpledev/babel.js"></script>
    <script type="text/babel">
    function ChatInput({chatMessages, setChatMessages}) { //inputs the data internally
      const [inputText, setInputText] = React.useState('');


      function saveInputText(event){
        setInputText(event.target.value);
      }

      function sendMessage(){
        const newChatMessages = [
          ...chatMessages,
          {
            message: inputText,
            sender: 'user',
            id: crypto.randomUUID()
          }
        ]
        
        setChatMessages(newChatMessages);

          const response = Chatbot.getResponse(inputText);
          setChatMessages([
          ...newChatMessages,
          {
            message: response,
            sender: 'robot',
            id: crypto.randomUUID()
          }
        ]);

          setInputText('');
      }

        return (
            <div
              className="chat-input-container">
              <input 
                placeholder="Send a message to Chatbot" 
                size="30" 
                onChange={saveInputText}
                value={inputText}
                className="class-input"
              />
              <button
                onClick={sendMessage}
                className="send-button"
              >Send</button>  
            </div>
        );
    }

    function ChatMessage(props){ //outputs the conversation
      const {message,sender} = props;
      
      return (
        <div className={
          sender==='user' 
          ? 'chat-message-user' 
          : 'chat-message-robot'
        }>
          {sender==='robot' && (
            <img src="images/robot.png" className="chat-message-profile"></img>
          )}
          <div className="chat-message-text">
            {message}
          </div>
          {sender==='user' && (
            <img src="images/user.png" className="chat-message-profile"></img>
          )}
          
        </div>
      )
    }
    
    function ChatMessages({chatMessages}){ //inputs the data to be outputted
      return (
        <div className="chat-messages-container">
          {chatMessages.map((chatMessage)=>{
            return (
              <ChatMessage 
                message={chatMessage.message}
                sender={chatMessage.sender}
                key={chatMessage.id}
              />
            );
          })}
        </div>
      )
    }

    //this is a component(piece of a website)
    //a component can be inside a component
    function App(){
            const [chatMessages, setChatMessages] = React.useState([{
        message: 'hello chatbot',
        sender: 'user',
        id: 'id1'
      },{
        message: 'Hello! How can I help you?',
        sender: 'robot',
        id: 'id2'
      },{
        message: 'Can you give me todays date?',
        sender: 'user',
        id: 'id3'
      },{
        message: 'Today is 11/16/2025',
        sender: 'robot',
        id: 'id4'
      }]);
      //const chatMessages = array[0];  //initial data
      //const setChatMessages = array[1]; //updater function
      return (
        <div className="app-container"> 
          <ChatMessages
            chatMessages={chatMessages}
          />
          <ChatInput 
            chatMessages={chatMessages}
            setChatMessages={setChatMessages}
          />
        </div>
      );
    }
    
      const container = document.querySelector('.js-container');
      ReactDOM.createRoot(container).render(<App />);
    </script>
  </body>
</html>